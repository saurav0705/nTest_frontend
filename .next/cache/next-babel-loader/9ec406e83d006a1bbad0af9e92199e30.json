{"ast":null,"code":"import _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _JSON$stringify from \"@babel/runtime-corejs2/core-js/json/stringify\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport Social from '../signupAndLogin/social';\nimport Layout from '../Layout';\nimport { render } from 'react-dom';\nimport { Component } from 'react';\nimport fetch from 'isomorphic-fetch';\nimport Router from 'next/router';\n\nvar LogIn =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(LogIn, _Component);\n\n  function LogIn(props) {\n    var _this;\n\n    _classCallCheck(this, LogIn);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(LogIn).call(this, props));\n    _this.state = {\n      username: '',\n      password: '',\n      error: ''\n    };\n    _this.handleChange = _this.handleChange.bind(_assertThisInitialized(_this));\n    _this.handlePasswordChange = _this.handlePasswordChange.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(LogIn, [{\n    key: \"handleChange\",\n    value: function handleChange(event) {\n      this.setState({\n        username: event.target.value\n      });\n    }\n  }, {\n    key: \"handlePasswordChange\",\n    value: function handlePasswordChange(event) {\n      this.setState({\n        password: event.target.value\n      });\n    }\n  }, {\n    key: \"login\",\n    value: function login() {\n      var url, response, _ref, token;\n\n      return _regeneratorRuntime.async(function login$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (!(this.state.username === '' || this.state.password === '')) {\n                _context.next = 4;\n                break;\n              }\n\n              this.setState({\n                error: \"Fields can't be Empty\"\n              });\n              _context.next = 25;\n              break;\n\n            case 4:\n              url = 'https://questionstack-266907.appspot.com//users/login/'; //console.log(.*)$\n\n              _context.prev = 5;\n              _context.next = 8;\n              return _regeneratorRuntime.awrap(fetch(url, {\n                method: 'POST',\n                headers: {\n                  'Content-Type': 'application/json',\n                  \"Access-Control-Allow-Origin\": '*'\n                },\n                body: _JSON$stringify({\n                  username: this.state.username,\n                  password: this.state.password\n                })\n              }));\n\n            case 8:\n              response = _context.sent;\n\n              if (!response.ok) {\n                _context.next = 19;\n                break;\n              }\n\n              _context.next = 12;\n              return _regeneratorRuntime.awrap(response.json());\n\n            case 12:\n              _ref = _context.sent;\n              token = _ref.token;\n              localStorage.setItem('loggedIn', 'true');\n              localStorage.setItem('token', token); //console.log(.*)$\n              //console.log(.*)$\n\n              Router.push('/questionspage');\n              _context.next = 20;\n              break;\n\n            case 19:\n              this.setState({\n                error: \"Invalid Credentials\"\n              });\n\n            case 20:\n              _context.next = 25;\n              break;\n\n            case 22:\n              _context.prev = 22;\n              _context.t0 = _context[\"catch\"](5);\n              this.setState({\n                error: \"Server not Reachable\"\n              });\n\n            case 25:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, this, [[5, 22]]);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return __jsx(React.Fragment, null, __jsx(Layout, null, __jsx(\"div\", null, __jsx(Social, null), __jsx(\"center\", null, __jsx(\"div\", {\n        className: \"mt-5 border w-full max-w-xs\"\n      }, __jsx(\"div\", {\n        className: \"bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4\"\n      }, __jsx(\"form\", null, __jsx(\"div\", {\n        className: \"mb-4\"\n      }, __jsx(\"label\", {\n        className: \"block text-gray-700 text-sm font-bold mb-2\",\n        htmlFor: \"username\"\n      }, \"Email\"), __jsx(\"input\", {\n        value: this.state.username,\n        onChange: this.handleChange,\n        className: \"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\",\n        id: \"username\",\n        type: \"text\",\n        placeholder: \"Email\",\n        name: \"username\",\n        required: true\n      })), __jsx(\"div\", {\n        className: \"mb-6\"\n      }, __jsx(\"label\", {\n        className: \"block text-gray-700 text-sm font-bold mb-2\",\n        htmlFor: \"password\"\n      }, \"Password\"), __jsx(\"input\", {\n        value: this.state.password,\n        onChange: this.handlePasswordChange,\n        className: \"shadow appearance-none border  rounded w-full py-2 px-3 text-gray-700 mb-3 leading-tight focus:outline-none focus:shadow-outline\",\n        id: \"password\",\n        type: \"password\",\n        placeholder: \"Password\",\n        required: true\n      }), __jsx(\"span\", {\n        className: \"text-red-500 p-2 m-2\"\n      }, this.state.error)), __jsx(\"div\", {\n        className: \"flex items-center justify-between\"\n      }, __jsx(\"button\", _defineProperty({\n        type: \"submit\",\n        onClick: function onClick() {\n          _this2.login();\n        },\n        className: \"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline\"\n      }, \"type\", \"button\"), \"Log In\"), __jsx(\"a\", {\n        className: \"inline-block align-baseline font-bold text-sm text-blue-500 hover:text-blue-800\",\n        href: \"#\"\n      }, \"Forgot Password?\")))))))));\n    }\n  }]);\n\n  return LogIn;\n}(Component);\n\nexport default LogIn;","map":null,"metadata":{},"sourceType":"module"}