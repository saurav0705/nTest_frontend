{"ast":null,"code":"import _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _JSON$stringify from \"@babel/runtime-corejs2/core-js/json/stringify\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\Users\\\\Lenovo\\\\Desktop\\\\ntest\\\\next_tailwind\\\\pages\\\\signupAndLogin\\\\login.js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport Social from '../signupAndLogin/social';\nimport Layout from '../Layout';\nimport { render } from 'react-dom';\nimport { Component } from 'react';\nimport fetch from 'isomorphic-fetch';\nimport Router from 'next/router';\n\nvar LogIn =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(LogIn, _Component);\n\n  function LogIn(props) {\n    var _this;\n\n    _classCallCheck(this, LogIn);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(LogIn).call(this, props));\n    _this.state = {\n      username: '',\n      password: ''\n    };\n    _this.handleChange = _this.handleChange.bind(_assertThisInitialized(_this));\n    _this.handlePasswordChange = _this.handlePasswordChange.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(LogIn, [{\n    key: \"handleChange\",\n    value: function handleChange(event) {\n      this.setState({\n        username: event.target.value\n      });\n    }\n  }, {\n    key: \"handlePasswordChange\",\n    value: function handlePasswordChange(event) {\n      this.setState({\n        password: event.target.value\n      });\n    }\n  }, {\n    key: \"login\",\n    value: function login() {\n      var url, response, _ref, token;\n\n      return _regeneratorRuntime.async(function login$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              console.log(this.state.username + \"      \" + this.state.password);\n\n              if (!(this.state.username === '' || this.state.password === '')) {\n                _context.next = 5;\n                break;\n              }\n\n              alert(\"invalid fields can't be empty\");\n              _context.next = 30;\n              break;\n\n            case 5:\n              url = 'http://localhost:8080/users/login/';\n              console.log(_JSON$stringify({\n                username: this.state.username,\n                password: this.state.password\n              }));\n              _context.prev = 7;\n              _context.next = 10;\n              return _regeneratorRuntime.awrap(fetch(url, {\n                method: 'POST',\n                headers: {\n                  'Content-Type': 'application/json',\n                  \"Access-Control-Allow-Origin\": '*'\n                },\n                body: _JSON$stringify({\n                  username: this.state.username,\n                  password: this.state.password\n                })\n              }));\n\n            case 10:\n              response = _context.sent;\n\n              if (!response.ok) {\n                _context.next = 23;\n                break;\n              }\n\n              _context.next = 14;\n              return _regeneratorRuntime.awrap(response.json());\n\n            case 14:\n              _ref = _context.sent;\n              token = _ref.token;\n              localStorage.setItem('loggedIn', 'true');\n              localStorage.setItem('token', token);\n              console.log(token);\n              console.log(response);\n              Router.push('/questionspage');\n              _context.next = 24;\n              break;\n\n            case 23:\n              alert('Login failed.');\n\n            case 24:\n              _context.next = 30;\n              break;\n\n            case 26:\n              _context.prev = 26;\n              _context.t0 = _context[\"catch\"](7);\n              console.error('You have an error in your code or there are Network issues.', _context.t0);\n              throw new Error(_context.t0);\n\n            case 30:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, this, [[7, 26]]);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this,\n          _jsx;\n\n      return __jsx(React.Fragment, null, __jsx(Layout, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      }, __jsx(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      }, __jsx(Social, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      }), __jsx(\"center\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }, __jsx(\"div\", {\n        className: \"mt-5 border w-full max-w-xs\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }, __jsx(\"div\", {\n        className: \"bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }, __jsx(\"form\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }, __jsx(\"div\", {\n        className: \"mb-4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }, __jsx(\"label\", {\n        className: \"block text-gray-700 text-sm font-bold mb-2\",\n        \"for\": \"username\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }, \"Email\"), __jsx(\"input\", {\n        value: this.state.username,\n        onChange: this.handleChange,\n        className: \"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\",\n        id: \"username\",\n        type: \"text\",\n        placeholder: \"Email\",\n        name: \"username\",\n        required: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      })), __jsx(\"div\", {\n        className: \"mb-6\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      }, __jsx(\"label\", {\n        className: \"block text-gray-700 text-sm font-bold mb-2\",\n        \"for\": \"password\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      }, \"Password\"), __jsx(\"input\", {\n        value: this.state.password,\n        onChange: this.handlePasswordChange,\n        className: \"shadow appearance-none border  rounded w-full py-2 px-3 text-gray-700 mb-3 leading-tight focus:outline-none focus:shadow-outline\",\n        id: \"password\",\n        type: \"password\",\n        placeholder: \"Password\",\n        required: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      })), __jsx(\"div\", {\n        className: \"flex items-center justify-between\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }, __jsx(\"button\", (_jsx = {\n        type: \"submit\",\n        onClick: function onClick() {\n          _this2.login();\n        },\n        className: \"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline\"\n      }, _defineProperty(_jsx, \"type\", \"button\"), _defineProperty(_jsx, \"__source\", {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      }), _defineProperty(_jsx, \"__self\", this), _jsx), \"Log In\"), __jsx(\"a\", {\n        className: \"inline-block align-baseline font-bold text-sm text-blue-500 hover:text-blue-800\",\n        href: \"#\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95\n        },\n        __self: this\n      }, \"Forgot Password?\")))))))));\n    }\n  }]);\n\n  return LogIn;\n}(Component);\n\nexport default LogIn;","map":{"version":3,"sources":["C:/Users/Lenovo/Desktop/ntest/next_tailwind/pages/signupAndLogin/login.js"],"names":["Social","Layout","render","Component","fetch","Router","LogIn","props","state","username","password","handleChange","bind","handlePasswordChange","event","setState","target","value","console","log","alert","url","method","headers","body","response","ok","json","token","localStorage","setItem","push","error","Error","login"],"mappings":"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","sourcesContent":["import Social from '../signupAndLogin/social';\r\nimport Layout from '../Layout';\r\nimport { render } from 'react-dom';\r\nimport { Component } from 'react';\r\nimport fetch from 'isomorphic-fetch';\r\nimport  Router  from 'next/router';\r\n\r\n\r\n\r\nclass LogIn extends Component\r\n{\r\n  \r\n  constructor(props){\r\n    super(props);\r\n    this.state = { username: '', password: ''  }\r\n    this.handleChange = this.handleChange.bind(this)\r\n    this.handlePasswordChange = this.handlePasswordChange.bind(this)\r\n    \r\n  }\r\n  \r\n  \r\n\r\n  handleChange (event) {\r\n    this.setState({ username: event.target.value })\r\n  }\r\n  handlePasswordChange (event) {\r\n    this.setState({ password: event.target.value })\r\n  }\r\n  \r\n\r\n  async login()\r\n  {\r\n    console.log(this.state.username+\"      \"+this.state.password);\r\n    if(this.state.username === '' || this.state.password === '')\r\n    {alert(\"invalid fields can't be empty\")}\r\n    else{\r\n      const url = 'http://localhost:8080/users/login/'\r\n      console.log(JSON.stringify({ username:this.state.username,password:this.state.password }));\r\n      try {\r\n        const response = await fetch(url, {\r\n          method: 'POST',\r\n          headers: { 'Content-Type': 'application/json' ,\r\n          \"Access-Control-Allow-Origin\":'*'},\r\n          body: JSON.stringify({ username:this.state.username,password:this.state.password })\r\n        }\r\n        )\r\n        if (response.ok) {\r\n          const { token } = await response.json()\r\n          localStorage.setItem('loggedIn','true');\r\n          localStorage.setItem('token',token);\r\n          console.log(token);\r\n          console.log(response);\r\n          Router.push('/questionspage');\r\n        } else {\r\n          alert('Login failed.')\r\n          \r\n        }\r\n      } catch (error) {\r\n        console.error(\r\n          'You have an error in your code or there are Network issues.',\r\n          error\r\n        )\r\n        throw new Error(error)\r\n      }\r\n    }\r\n  }\r\n\r\n  render(){\r\n\r\n                return (<>\r\n                      <Layout>\r\n                        <div>\r\n                        <Social />\r\n                        <center>\r\n                        <div className=\"mt-5 border w-full max-w-xs\">\r\n                  <div className=\"bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4\">\r\n                    <form>\r\n                    <div className=\"mb-4\">\r\n                      <label className=\"block text-gray-700 text-sm font-bold mb-2\" for=\"username\">\r\n                        Email\r\n                      </label>\r\n                      <input value={this.state.username} onChange={this.handleChange} className=\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\" id=\"username\" type=\"text\" placeholder=\"Email\" name=\"username\" required/>\r\n                    </div>\r\n                    <div className=\"mb-6\">\r\n                      <label className=\"block text-gray-700 text-sm font-bold mb-2\" for=\"password\">\r\n                        Password\r\n                      </label>\r\n                      <input  value={this.state.password} onChange={this.handlePasswordChange} className=\"shadow appearance-none border  rounded w-full py-2 px-3 text-gray-700 mb-3 leading-tight focus:outline-none focus:shadow-outline\" id=\"password\" type=\"password\" placeholder=\"Password\" required/>\r\n                    </div>\r\n                    <div className=\"flex items-center justify-between\">\r\n                      <button type=\"submit\" onClick={()=>{this.login()}} className=\"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline\" type=\"button\">\r\n                        Log In\r\n                        {/* {(this.state.loggedIn ? <></>:<div>failed</div>)} */}\r\n                      </button>\r\n                      <a className=\"inline-block align-baseline font-bold text-sm text-blue-500 hover:text-blue-800\" href=\"#\">\r\n                        Forgot Password?\r\n                      </a>\r\n                    </div>\r\n                    </form>\r\n                  </div>\r\n                  \r\n                </div>\r\n                </center>\r\n                </div>\r\n                </Layout>\r\n                </>\r\n                );\r\n            };\r\n}\r\nexport default LogIn;"]},"metadata":{},"sourceType":"module"}